{% assign group_id = group.id | append: '' %}
{% assign ids = current_profile.joined_group_ids | map: 'id' %}

{% liquid
  if ids contains group_id
    assign joined = true
  else
    assign joined = false
  endif
%}

<button href="#" class="{% if joined %} joined{% endif %}"
  title="join/leave"
  data-join-group="{% print group.id %}">

  <span class="button join">
    Join
  </span>

  <span class="button button-secondary leave">
    Leave
  </span>
</button>
